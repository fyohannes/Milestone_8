---
title: "Replication Paper"
author: "Feven Yohannes"
date: "April 20, 2020"
header-includes:
    - \usepackage{setspace}\doublespacing
output: html_document
bibliography: bibliography.bib
link_citations: true
---

```{r setup, include=FALSE,message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(readr)
library(styler)

# Styling for comments

library(dplyr)
library(lmtest)
library(gridExtra)

# Need this package to package for my posterior predicitive distribution graphs in my extension -- trial 1

library(huxtable)

# Need this package for my posterior predictive distribution graphs 

library(tinytex)

# Need this to run coeftest

library(sandwich)

# Need this to run vcovHc

library(tidybayes)
library(bayesplot)
library(ggplot2)

# Need this to make my graphic for my extension 

library(rstanarm)
library(cowplot)

# Need this for my graphics in my extension

library(kableExtra)

# Need this for stargazer format editing 

library(stargazer)
library(tidyverse)

# Reading in the data 

budget <- read_csv("dataverse_files/replication_file_jop/data/budget_results.csv", col_types = cols(
  .default = col_double(),
  kab.x = col_character(),
  kab.y = col_character()
))

constituency_data  <- read_csv("dataverse_files/replication_file_jop/data/pub_opinion_results.csv",
                           col_types = cols(
  .default = col_double(),
  dapil = col_character()
                           ))

candidate_data  <- read_csv("dataverse_files/replication_file_jop/data/candidate_2019_data.csv",
                           col_types = cols(
  .default = col_double(),
  dapil = col_character()
                           ))

center_data  <- read_csv("dataverse_files/replication_file_jop/data/center_data.csv",
                           col_types = cols(
  .default = col_double(),
  dapil = col_character()
                           ))

gender_data  <- read_csv("dataverse_files/replication_file_jop/data/dapil_gender_composition.csv",
                           col_types = cols(
  .default = col_double(),
  dapil = col_character()
                           ))

election_data  <- read_csv("dataverse_files/replication_file_jop/data/election_characteristics_balance.csv",
                           col_types = cols(
  .default = col_double(),
  dapil = col_character()
                           ))

gender_estimation_data  <- read_csv("dataverse_files/replication_file_jop/data/estimation_sample_dapils_w_gender.csv",
                           col_types = cols(
  .default = col_double(),
  dapil = col_character()
                           ))
  
laws_data  <- read_csv("dataverse_files/replication_file_jop/data/laws_dprd_2009.csv",
                           col_types = cols(
  .default = col_double(),
  dapil = col_character()
                           ))

public_opinion_individual_data  <- read_csv("dataverse_files/replication_file_jop/data/pub_opinion_results_individual.csv",
                           col_types = cols(
  .default = col_double(),
  dapil = col_character()
                           ))
```


# Abstract

  Kuipers (2019) explores the effect that the election of female candidates in the Indonesian legislature has on intimate partner violence attitudes. I found my results to be consistent with the results found in the paper. After running the code from the main models, I concurred that the results showed that the election of female candidates did, in fact, have an effect that’s statistically significant on the IPV attitudes on female constituents. These results are particularly important because it shows the possible effect that female candidates can have on decreasing IPV, by at least contributing to more condemnation of IPV. Thus, the election of female candidates can result in tangible responses to IPV, leading to safer and healthier communities for women.
  
# Introduction

  My project replicates data from Kuipers' "The Effect of Electing Female Candidates on Attitudes Towards Intimate Partner Violence". In this paper, Kuipers investigates the relationship between the election of female candidates and the change in IPV (intimate partner violence) opinions. He creates two models that predict the change in IPV opinions with the predictor variable of an additional female legislator. The first model looks at female constituents, while the second examines male constituents. His models show statistically significant results for female constituents, thus showing that the addition of female legislators does have some impact on IPV opinions for female constituents. After examining these models, Kuipers goes on to explain possible reasons for the impact that female legislators could have. One reason includes allocating more resources to health centers that in turn could impact IPV opinions through awareness and appropriate resources for victims. This finding is particularly important as it demonstrates how female legislators can have a unique impact on women's issues. This idea that female legislators have an impact on reducing IPV has also been explored by other authors as Kuipers mentions. In a study conducted in India, @Iyer et al (2012) female victims were most likely to report their abuse in the 1990s, following the implementation of gender quotas in the legislature. Furthermore, this is also consistent with a study conducted in Rwanda, where @Burnet (2011) found that the increase in female legislators led to the enaction of a law that specifically targeted prohibiting gender violence. In conjunction with Kuipers' paper, both pieces of literature outline the possible effect that an increase in female legislators can have on IPV and thus, reveal the significance of female legislators on women's issues and health.
  In my replication paper, I use R programming to replicate the modeling through the use of data and code that was made available on Dataverse ^ [https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/MPBGXL]. In order to replicate the tables and figures featured in the paper, I downloaded all of the available data and ran the same exact codes that were originally used. The replication of these models can be found here ^[All analysis for this paper can be found on this repo link: https://github.com/fyohannes/Milestone_8].
  Through my replication, I found results that were consistent with the findings of the original paper. I specifically focused on the main results of the paper that showed the relationship between the election of female candidates and IPV opinions. The first model examined the relationship between the election of a female candidate and the change in female attitudes from 2009 (before the election of a female candidate) and 2012 (three years after the election of a female candidate) on multiple questions related to IPV. The first table displayed the coefficients, p values. and standard errors of the respective coefficients from the first model that explored female candidates and change in IPV opinions on a variety of questions. These five questions include 1) Is it okay to beat one's wife if she goes out? 2)Is it okay to beat one's wife if she neglects the kids? 3)Is it okay to beat one's wife if she argues? 4)Is it okay to beat one's wife if she refuses food? 5) Is it okay to beat one's wife if she burns food? The fitted models show that female respondents are more likely to have attitudes that condemn IPV. For example, “the proportion of female respondents stating that it is acceptable to beat one’s wife if she burns the food drops by 3.2 percentage points”(Kuipers 6). These results are generally consistent with all five questions. Furthermore, the index of the first model, which is an aggregation of all five questions, shows a decrease of 2 percentage points, thus showing that the election of a female candidate did lead to more condemnation of intimate partner violence for female constituents.
  The second model and table show the relationship between the election of a female candidate on the change in IPV opinions by male constituents. It follows the same procedures and modeling of the first model, with the only difference being the gender of the respondents of the survey. In this model, we see some of the same patterns of less tolerant opinions on intimate partner violence and abuse, however, they were not as statistically significant as the results from the first table. Thus leading us to conclude that there are some the election of a female candidate has a different on male and female constituents. 
  
# Paper Review:

  Nicholas Kuipers' paper "The Effect of Electing Female Candidates on Attitudes Towards Intimate Partner Violence", examines how electing female candidates in local elections in Indonesia can lead to a decrease in intimate partner violence. He specifically looks at elections where the female candidate narrowly wins. This narrow win is determined ny a win by a female candidatae by one percent or less. Kuipers only looks at narrow wins as a means to somewhat control for pre-exisitng attitudes. Thus, Kuipers assumes that by looking at regions with narrow wins, constituents will have less of an bias attitude towards questions relating to IPV and thus making their opinions on IPV easier to analyze. Overall he finds that a female victory in local elections leads to an increase in female constituents and male constituents (although not as much) condemning domestic abuse. 
  In his experiment, Kuipers examines the effect of electing female candidates to the Dewan Perwakilan Rakyat Daerah, a legislative body in Indonesia. He estimates the effect of adding an additional female lawmaker to the legislative body on tolerance levels of IPV among constituents. To measure the attitudes towards IPV, Kuipers used the USAID Demographic and Health Survey (DHS), which was conducted in 2012 as a nationally representative survey of middle-aged women and men. The main results showed that electing females did affect constituent's beliefs toward IPV. For example "Electing a female legislator leads a 6.4 percentage point drop in the proportion of women who say it is acceptable to beat one’s wife if she goes out without telling her husband". The main results also showed to have similiar effects on IPV opinions for male constituents, however, the results were not as statistically significant. However, one point estimate that was signifcant for males was for the coefficent of the fifth dependent variable. Kuipers finds that the addition of an elected female candidate leads to a decrease in the share of male constiutents who claim that it is acceptable to beat one's wife if she refuses sex by 3.3 percentage points. 
    While the results show a general trend of more condemning addtiudes towards IPV, Kuipers also conducts a placebo test to further confirm his results. One concern that was mentioned was the concern that there was an "imbalance in pre–election
differences in the distribution of outcomes"(Kuipers,2009,6). The placebo test conducts an analysis on survey data from 2007 and then is compared with the results from 2009. Table three, the results of the placebo test, doesn't give any indication that there was a pre-election imbalance. The results show that sentiments towards IPV seemed to be consistent between constitutencies where a female candidate narrowly won and constitutencies where a female candidate narrowly lost. Thus, conducting this placebo test gives more assurance for the accuracy of the results of our first two models.
  The results of the main analysis demonstrate that the addition of a female legislator can have an effect on attitudes towards IPV. Kuipers claims that the reason for this change in attitude may be because of laws that female politicians tend to enact in regard to domestic abuse. Kuipers analyzed recent data from 2019 candidate platforms for local offices and found that female candidates were 28 times more likely to mentioned women's issues than male candidates. Thus, from this one could infer that female candidates priortize women issues more and this could in turn result in differing methods to address women issues when elected. Female politicians may allocate more resources in awareness, helping victims, or strengthening laws that prohibit or punish domestic abuse. Kuipers finds that female legislators are more likely to allocate health funding to iniatives regarding women issues. Overall it seems that female legislators play a large role in changing attitudes towards IPV. Female legislators could have a large effect on policy implications and empowering people to condemn IPV.

# Literature Review 

$$\text{
 	As previously mentioned, this paper focuses on the effects that female policymakers  have on IPV opinions. In his paper, Kuipers introduces other countries in which the relationship between female representation in government and attitudes towards IPV (intimate partner violence) is significant. For example, he refers to a paper titled “Powerful Women: Does Exposure Reduce Bias?” by Beaman et al. (2009). This paper is a case analysis on Indian village councils and similarly to Kuipers’ paper, it examines the effect the female leaders can have on changing perceptions about female capacity and gender roles. In this paper, India saw that an increase in female representation led to weakened gender stereotypes in the domestic sphere and well as the political arena. Although attitudes on male leaders did not change, this paper shows a change in attitude towards female leaders, most notably the perspective of the effectiveness and capacity of female politicians, all contributing to the weakening of gender stereotypes. The theory and findings within this paper greatly tie to the research question presented in Kuipers’ paper. Both papers analyze the impact that female candidates can have on attitudes related to women’s rights and gender norms.
 	These theories are not only present in the aforementioned papers, but the same themes are present in a working paper conducted by the United Nations called “Maternal Mortality and Women’s Political Participation”. This working paper examines the relationship between quotas for women in parliament and the effect it has on the decline in maternal mortality across multiple nations. The paper highlighted how maternal mortality fell at a faster rate for countries that had instituted gender quota in their parliament. In conclusion, this paper finds that women's involvement in policy-making, not country income or advances in medical technology, is the greatest factor for rapid maternal mortality decline. 
  All three papers highlight the importance of female politicians on pertinent issues such as maternal mortality or domestic abuse. Thus, these papers emphasize the effect that women politicians have on breaking stereotypes and how they are more efficient in dealing with female health and wellness issues. The United Nations working paper and the paper conducted by Beaman et al help reinforce the theory that is found in Kuiper’s paper.
}$$
  
# Replication:

  In my replication project, I replicated the three main models of the paper. The first model looked at the effect of female incumbency on IPV attitudes on female constituents. The second model looked at the effect of female incumbency on IPV attitudes of male constituents. The third model was a placebo test that predicted the effect of female incumbency on pre-treatment attitudes for both male and female constituents. In my replication, I found all of my results to be consistent with the results of the original paper.  
  

# Extension

<div align="center">
```{r,extension for table1,results="asis", warning=FALSE,message=FALSE}


# I set my seed all the numbers of my results stay the same

set.seed(9)

# This is filtering so we only look at observations where female constitutents win by a margin of one percent or less


constituency_data <- constituency_data[abs(constituency_data$win_margin) < 0.01,]


# Instead of running the regression by using lm, I will use stan_lm
# Adding refresh=0 so it doesn't run multiple times
# Using prior=NULL because we have no prior since we are transforming te orginial lm regressions into a Bayesian model

mod_fem1_new <- stan_lm(v744a_f2012 ~ woman_win, data = constituency_data, prior= NULL, refresh=0)
mod_fem2_new <- stan_lm(v744b_f2012 ~ woman_win, data = constituency_data, prior= NULL,refresh=0)
mod_fem3_new <- stan_lm(v744c_f2012 ~ woman_win, data = constituency_data, prior= NULL,refresh=0)
mod_fem4_new <- stan_lm(v744d_f2012 ~ woman_win, data = constituency_data, prior= NULL,refresh=0)
mod_fem5_new <- stan_lm(v744e_f2012 ~ woman_win, data = constituency_data,prior= NULL,refresh=0)

# This added an index of the prior information onto the table

mod_fem7_new <- stan_lm(add_index_f2012 ~ woman_win, data = constituency_data, prior= NULL,refresh=0)

# Nobs computes the number of non-missing observations

observations_new <- c(nobs(mod_fem1_new),nobs(mod_fem2_new),nobs(mod_fem3_new),nobs(mod_fem4_new),nobs(mod_fem5_new),nobs(mod_fem7_new))

# Coefests is an inference for estimated coefficents on the models
# I need different names for the coeftests and the regressions bc my graphics will just be looking at bayesian regressions

mod_fem1_new_coef <- coeftest(mod_fem1_new)
mod_fem2_new_coef <- coeftest(mod_fem2_new)
mod_fem3_new_coef <- coeftest(mod_fem3_new)
mod_fem4_new_coef<- coeftest(mod_fem4_new)
mod_fem5_new_coef <- coeftest(mod_fem5_new)
mod_fem7_new_coef <- coeftest(mod_fem7_new)


# Made the models with their respective coefficents into a table 
# The numbers in the parantheses is the standard error. 



table_new <- huxreg('Goes out'= mod_fem1_new, 'Neglects Children'= mod_fem2_new, 'Argues'= mod_fem3_new, 'Refuses sex'= mod_fem4_new, 'Burns food'= mod_fem5_new, 'Index'=mod_fem7_new)

# show pvalue >>>> with bayesian you cant get a specfic pvalue >>> bayesian pvalue?
# not signifant?

# Adding a tittle 

table_new <- table_new %>%
  set_caption('Linear regressions of Female Incumbency on IPV attitudes for Female Constitutents') 

# Printing my table

table_new


# ppcheck >>> shows difference between the  model data... how well the bayesian regression fits with the data that is provided 

# dark line is the data, light line is the bayesian model

# The code found for the posterior predictive check of model 1 is similiar to the next 5 models
# I used the pp_check function to make the posterior predicitve graphic
# I used the theme function to change the arrnagement of my x axis lables 
# I decreased the size of the legend 

# This graph just looks at the index showing overall IPV attitude changes
# Posterior Predicitve Check on the index because that shows how good the overall model fit is


model7_check <- pp_check(mod_fem7_new,"dens_overlay") +  theme(axis.text.x = element_text(size = 9, angle = 90, vjust = 0.5)) +
  labs(title= "Posterior Predicitve Checking for Female Constituent Results", subtitle = "Examining the regression that predicts the change in overall Female attitudes on Intimate Partner Violence", caption= "The above graph depicts how well the Bayesian model fits the index model. \n This index model is an aggregation of 5 regressions that predict change in  \n IPV attutides for female constituents with their respecitive dependent variables.\n Overall the graph shows that this model seems to be a good fit \n  for the model that predicts change in IPV attitudes for female constituents.") +
  theme(legend.title = element_text(size = 5), 
               legend.text = element_text(size = 7)) +
  theme(plot.title = element_text(face = "bold"),
        plot.subtitle = element_text(size = 10),
plot.caption = element_text(size = 8, face = "italic"))


model7_check

# Arranging all of the graphs on one page


#graphic1 <- plot_grid(model1_check,model2_check,model3_check,model4_check,model5_check,model7_check,label_size = 12) + labs(title="Posterior Predictive Checking")

#graphic1 <- grid.arrange(model1_check,model2_check,model3_check,model4_check,model5_check,model7_check, ncol= 3, top="Posterior Predictive Checking for Female Constitutent Results")

```

  

```{r,extension for table2,results="asis",warning=FALSE}

set.seed(9)

# These lines of code do the same thing that the previous table did, however, rather than predicting female respondent results, it predicts male respondent results. 

# Instead of running the regression by using lm, I will use stan_lm
# Adding refresh=0 so it doesn't run multiple times
# Using prior=NULL because we have no prior since we are transforming te orginial lm regressions into a Bayesian model

mod_mal1_new <- stan_lm(v744a_m2012 ~ woman_win, prior= NULL, data = constituency_data,refresh=0)
mod_mal2_new <- stan_lm(v744b_m2012 ~ woman_win, prior= NULL, data = constituency_data,refresh=0)
mod_mal3_new <- stan_lm(v744c_m2012 ~ woman_win, prior= NULL, data = constituency_data,refresh=0)
mod_mal4_new <- stan_lm(v744d_m2012 ~ woman_win, prior= NULL, data = constituency_data,refresh=0)
mod_mal5_new <- stan_lm(v744e_m2012 ~ woman_win,  prior= NULL,data = constituency_data,refresh=0)
mod_mal7_new <- stan_lm(add_index_m2012 ~ woman_win,  prior= NULL,data = constituency_data,refresh=0)

# Named it observations2_new, so I didn't get confused with the other names

observations2_new <- c(nobs(mod_mal1_new),nobs(mod_mal2_new),nobs(mod_mal3_new),nobs(mod_mal4_new),nobs(mod_mal5_new),nobs(mod_mal7_new))

# The code below takes the coeftest of the models. I got rid of the original code that included covariance bc the covariance isn't present when running stan_lm, althogh it is in the original code when we ran stan_lm

mod_mal1_coef <- coeftest(mod_mal1_new)
mod_mal2_coef <- coeftest(mod_mal2_new)
mod_mal3_coef <- coeftest(mod_mal3_new)
mod_mal4_coef <- coeftest(mod_mal4_new)
mod_mal5_coef <- coeftest(mod_mal5_new)
mod_mal7_coef <- coeftest(mod_mal7_new)

table_new_male <- list(mod_mal1_new, mod_mal2_new, mod_mal3_new, mod_mal4_new, mod_mal5_new, mod_mal7_new)

# Making my table for male constiutents 

table_new_male <- huxreg('Goes out'= mod_mal1_new, 'Neglects Children'= mod_mal2_new, 'Argues'= mod_mal3_new, 'Refuses sex'= mod_mal4_new, 'Burns food'= mod_mal5_new, 'Index'=mod_mal7_new)


table_new_male <- table_new_male %>%
  set_caption('Linear regressions of Female Incumbency on IPV attitudes for Male Constituents') 

# Printing my table 

table_new_male


# This graph just looks at the index showing overall IPV attitude changes for males

model7_check_male <- pp_check(mod_mal7_new,"dens_overlay") +
  labs(title="Posterior Predicitve Checking for Male constituent results",subtitle = "Examining the regression that predicts the change in overall male attitudes on Intimate Partner Violence", caption ="The above graph depicts how well the Bayesian model fits the index model.\n This index model is an aggregation of 5 regressions that predict change in IPV attutides for male constituents \n with their respecitive dependent variables. \n Overall the graph shows that this model is not a good fit for  \n the model that predicts change in IPV attitudes for male constituents. \n One can see that the model that predicts female constituents is a much better fit,\n perhaps suggesting that the addition of female legislators has a larger effect on female constituents than male constituents.") + theme(axis.text.x = element_text(size = 9, angle = 90, vjust = 0.5)) + theme(legend.title = element_text(size = 5), 
               legend.text = element_text(size = 7)) +
  theme(plot.title = element_text(face = "bold"),
        plot.subtitle = element_text(size = 10),
plot.caption = element_text(size = 8, face = "italic"))

# Printing the table for the index only

model7_check_male

#graphic2 <- grid.arrange(model1_check_male,model2_check_male,model3_check_male,model4_check_male,model5_check_male,model7_check_male,ncol= 3, top="Posterior Predictive Checking for Male Constitutent Results ")

```
</div> 

  For my extension, I focused on re-creating the original regressions through a Bayesian model rather than a standard linear regression. A Bayesian regression, unlike the standard linear regression that reflects Frequentist thought, examines the predictive probability and sampling of the posterior probability distribution. This distribution integrates priors into the modeling and thus changes the distribution of our posterior probability. I used this Bayesian method and ran two models from the main results of the paper. The first was the model that predicted female IPV attitude changes. The second was a similar model that predicted male attitudes on IPV public opinion. These new models used the Bayesian inference for linear modeling and thus included regularizing priors on the model parameters. 

  First I modeled the two regressions through the Bayesian function stan_lm rather than a standard lm function. I had kept the dependent variables the same because I wanted to compare the regressions with the two different functions without changing much else in the model. The stan_lm function includes an argument that specifies the priors of the model so it's included in the regression. In my regression, I set priors to NULL because there were no specific priors available in the data. While the model did not include specific priors, the regressions created still followed a Bayesian framework.
  Overall, I attempted to examine any discrepancies between the results of these models with the original models found in the paper. I evaluated how well this model fits the data by comparing the coefficient estimates between the two models and by conducting a posterior predictive check. 
  In my first model, the model that predicted the change in female IPV opinions, the results between the coefficients of the standard linear model was generally consistent with the  Bayesian model. The coefficients for female incumbency measured the change in public opinion for regions where a female candidate won by one percentage point. The results essentially rendered the same output for each dependent variable after accounting for some minor discrepancies. For example, we see that the coefficient for Female Incumbency on the second dependent variable in the original paper is -.0.058. In the new model, we see the Female Incumbency coefficient at around -0.055. Most importantly the coefficient estimates for the index (the aggregation of all 5 models with their respective dependent variables) were also consistent. In the original paper, the index had a constant of 0.835 and a coefficient of -0.203. In my regression model, the index showed a constant of 0.832 and a Female Incumbency coefficient of -0.197. Thus, while the numbers are not identical, the values are quite similar and thus show consistency between the two types of models. Furthermore, it also validates Kuipers' claim that the results for the model that depicted female constituents are significant. Although we are unable to see the p-values with a Bayesian regression, one could still claim that the results of the Bayesian model are significant because they are similar to the results of the standard regression which was shown to be significant. Thus, the Bayesian model does show that the impact of additional female legislators does decrease IPV attitudes for female constituents.
  Similar to the first model that predicted the change in IPV opinions, the second model predicted the change in IPV opinions for male constituents. I also ran a Bayesian regression on the second model and generally found the estimates for the coefficients of female incumbency on each dependent variable to be consistent with the original paper. Looking at the index specifically, we see that the estimate for the constant and Female Incumbency coefficient is O.406 and -0.133 respectively in the original paper. In my regression I found the constant to be 0.401 and the coefficient for Female incumbency to be -0.124. Thus, these two outputs are quite similar and consistent. Because of that, one could also concur that the results of this model are not as significant, as reflected by the results of the standard regression. This further demonstrates that an additional female legislator doesn't have a strong effect on changing IPV attitudes for male constituents.
  In addition to the Bayesian models that I created, I also ran a posterior predictive check on the Bayesian regressions for both the models that predicted the change in female as well as male attitudes. The graphics that I have shown below represent these posterior predictive checkings, a method that simulates replicated data and compares it to the original data. Each graph compares the simulated data, which is denoted as yrep and has a light blue color, with the original data, which is denoted as y and has a dark blue color. When running the posterior predictive check on the regressions that predicted female public opinion, we can see that both fitted lines are quite similar. This suggests that the model that we have is a pretty good fit for our data. However, when running the posterior predictive check on regressions that predicted male public opinion, we can see that fitted lines have more variance and at times don't follow the same pattern. This is specifically true for regressions that predicted male opinions from the third, fourth, and fifth dependent variables, hinting that the model for male constituents is not a great fit for the data. 
  The posterior predictive checkings indicate that the original model used is a good fit for regressions predicting the change in IPV attitudes for female constituents, but not male constituents. Because this model is not a good fit for the data it highlights the potential failings of the model and thus raises a question on the validity of the results of the model for male constituents.


# Tables and Figures:
```{r,tables and figures, results="asis"}
# Replication code for table 1

# This next line of code filters for the constitutency data so we only look at regions where females win by a margin of 1 percent or less


# This filtering will be used by all the models and tables throughout the paper

constituency_data <- constituency_data[abs(constituency_data$win_margin) < 0.01,]




# These fitted lines model the relationship between female incumbency and public opinions on 5 questions. These five questions incude 1)Is it okay to beat one's wife if she goes out?  2)Is it okay to beat one's wife if she neglects the kids?  3)Is it okay to beat one's wife if she argues? 4)Is it okay to beat one's wife if she refuses food ? 5) Is it okay to beat one's wife if she burns food?

mod_fem1 <- lm(v744a_f2012 ~ woman_win, data = constituency_data)
mod_fem2 <- lm(v744b_f2012 ~ woman_win, data = constituency_data)
mod_fem3 <- lm(v744c_f2012 ~ woman_win, data = constituency_data)
mod_fem4 <- lm(v744d_f2012 ~ woman_win, data = constituency_data)
mod_fem5 <- lm(v744e_f2012 ~ woman_win, data = constituency_data)

# This added an index of the prior information onto the table

mod_fem7 <- lm(add_index_f2012 ~ woman_win, data = constituency_data)

# Nobs computes the number of non-missing observations

observations <- c(nobs(mod_fem1),nobs(mod_fem2),nobs(mod_fem3),nobs(mod_fem4),nobs(mod_fem5),nobs(mod_fem7))

# Coefests is an inference for estimated coefficents on the models

mod_fem1 <- coeftest(mod_fem1, vcov=vcovHC(mod_fem1,type="HC0"))
mod_fem2 <- coeftest(mod_fem2, vcov=vcovHC(mod_fem2,type="HC0"))
mod_fem3 <- coeftest(mod_fem3, vcov=vcovHC(mod_fem3,type="HC0"))
mod_fem4 <- coeftest(mod_fem4, vcov=vcovHC(mod_fem4,type="HC0"))
mod_fem5 <- coeftest(mod_fem5, vcov=vcovHC(mod_fem5,type="HC0"))
mod_fem7 <- coeftest(mod_fem7, vcov=vcovHC(mod_fem7,type="HC0"))

# Made the models with their respective coefficents into a table 

table <- list(mod_fem1, mod_fem2, mod_fem3, mod_fem4, mod_fem5, mod_fem7)

note_text <- paste("Beta coefficients from OLS regression. Standard errors were calculated using the huber-white (HC0) correction. The outcomes are drawn from a battery of questions that asked respondents if it was acceptable to beat one's wife if she: (1) goes out without telling her husband; (2) neglects her children; (3) argues with her husband; (4) refuses sex; (5) burns the food. The index is an additive measure.")

# Used stargazer to make the table
# Included header equals false

table = stargazer(table,
                  title = "Effect of Female Incumbency on Female Attitudes Towards IPV", header=FALSE,
                  label = 'tab:table_female',
                  model.names = F,
                  model.numbers = T,
                  #column.separate = c(6),
                  column.labels = c("Goes out", "Neglects children", "Argues", "Refuses sex", "Burns food", "Index"),
                  
                  multicolumn = T,
                  dep.var.labels = c("Is it okay to beat one's wife if she:"), 
                  add.lines = list(c("Observations", observations),
                                   c('Bandwidth', rep(c('1\\%'), 6))),
                  covariate.labels = c("Female Incumbency"),
                  star.cutoffs = c(0.05, 0.01),
                  #float.env = 'sidewaystable',
                  keep.stat = c("n"),
                  notes = NULL,
                  notes.align = 'l')


# Reading in table 2 

# These lines of code do the same thing that the previous table did, however, rather than predicting female respondent results, it predicts male respondent results. 

mod_mal1 <- lm(v744a_m2012 ~ woman_win, data = constituency_data)
mod_mal2 <- lm(v744b_m2012 ~ woman_win, data = constituency_data)
mod_mal3 <- lm(v744c_m2012 ~ woman_win, data = constituency_data)
mod_mal4 <- lm(v744d_m2012 ~ woman_win, data = constituency_data)
mod_mal5 <- lm(v744e_m2012 ~ woman_win, data = constituency_data)
mod_mal7 <- lm(add_index_m2012 ~ woman_win, data = constituency_data)

observations2 <- c(nobs(mod_mal1),nobs(mod_mal2),nobs(mod_mal3),nobs(mod_mal4),nobs(mod_mal5),nobs(mod_mal7))

mod_mal1 <- coeftest(mod_mal1, vcov=vcovHC(mod_mal1,type="HC0"))
mod_mal2 <- coeftest(mod_mal2, vcov=vcovHC(mod_mal2,type="HC0"))
mod_mal3 <- coeftest(mod_mal3, vcov=vcovHC(mod_mal3,type="HC0"))
mod_mal4 <- coeftest(mod_mal4, vcov=vcovHC(mod_mal4,type="HC0"))
mod_mal5 <- coeftest(mod_mal5, vcov=vcovHC(mod_mal5,type="HC0"))
mod_mal7 <- coeftest(mod_mal7, vcov=vcovHC(mod_mal7,type="HC0"))

table2 <- list(mod_mal1, mod_mal2, mod_mal3, mod_mal4, mod_mal5, mod_mal7)

note_text <- paste("Beta coefficients from OLS regression. Standard errors were calculated using the huber-white (HC0) correction. The outcomes are drawn from a battery of questions that asked respondents if it was acceptable to beat one’s wife if she: (1) goes out without telling her husband; (2) neglects her children; (3) argues with her husband; (4) refuses sex; (5) burns the food. The index is an additive measure.")

table2 = stargazer(table2,
                  title = "Effect of Female Incumbency on Male Attitudes Towards IPV",
                  label = 'tab:table_male',
                  model.names = F,
                  model.numbers = T,
                  #column.separate = c(6),
                  header=FALSE,
                  column.labels = c("Goes out", "Neglects children", "Argues", "Refuses sex", "Burns food", "Index"),
                  
                  multicolumn = T,
                  dep.var.labels = c("Is it okay to beat one's wife if she:"), 
                  add.lines = list(c("Observations", observations2),
                                   c('Bandwidth', rep(c('1\\%'), 6))),
                  covariate.labels = c("Female Incumbency"),
                  star.cutoffs = c(0.05, 0.01),
                  #float.env = 'sidewaystable',
                  keep.stat = c("n"),
                  notes = NULL,
                  notes.align = 'l')


# Reading in table 3

# This table runs the hypothetical placebo effect for both males and females of the models prior

# These models are specific to females

mod2007_fem1 <- lm(v744a_f2007 ~ woman_win, data = constituency_data)
mod2007_fem2 <- lm(v744b_f2007 ~ woman_win, data = constituency_data)
mod2007_fem3 <- lm(v744c_f2007 ~ woman_win, data = constituency_data)
mod2007_fem4 <- lm(v744d_f2007 ~ woman_win, data = constituency_data)
mod2007_fem5 <- lm(v744e_f2007 ~ woman_win, data = constituency_data)
mod2007_fem7 <- lm(add_index_f2007 ~ woman_win, data = constituency_data)

observations3 <- c(nobs(mod2007_fem1),nobs(mod2007_fem2),nobs(mod2007_fem3),
                  nobs(mod2007_fem4),nobs(mod2007_fem5),nobs(mod2007_fem7))


mod2007_fem1 <- coeftest(mod2007_fem1, vcov=vcovHC(mod2007_fem1,type="HC0"))
mod2007_fem2 <- coeftest(mod2007_fem2, vcov=vcovHC(mod2007_fem2,type="HC0"))
mod2007_fem3 <- coeftest(mod2007_fem3, vcov=vcovHC(mod2007_fem3,type="HC0"))
mod2007_fem4 <- coeftest(mod2007_fem4, vcov=vcovHC(mod2007_fem4,type="HC0"))
mod2007_fem5 <- coeftest(mod2007_fem5, vcov=vcovHC(mod2007_fem5,type="HC0"))
mod2007_fem7 <- coeftest(mod2007_fem7, vcov=vcovHC(mod2007_fem7,type="HC0"))


# These models are specific to males

mod2007_mal1 <- lm(v744a_m2007 ~ woman_win, data = constituency_data)
mod2007_mal2 <- lm(v744b_m2007 ~ woman_win, data = constituency_data)
mod2007_mal3 <- lm(v744c_m2007 ~ woman_win, data = constituency_data)
mod2007_mal4 <- lm(v744d_m2007 ~ woman_win, data = constituency_data)
mod2007_mal5 <- lm(v744e_m2007 ~ woman_win, data = constituency_data)
mod2007_mal7 <- lm(add_index_m2007 ~ woman_win, data = constituency_data)

observations3_male <- c(nobs(mod2007_mal1),nobs(mod2007_mal2),nobs(mod2007_mal3),
                       nobs(mod2007_mal4),nobs(mod2007_mal5),nobs(mod2007_mal7))


mod2007_mal1 <- coeftest(mod2007_mal1, vcov=vcovHC(mod2007_mal1,type="HC0"))
mod2007_mal2 <- coeftest(mod2007_mal2, vcov=vcovHC(mod2007_mal2,type="HC0"))
mod2007_mal3 <- coeftest(mod2007_mal3, vcov=vcovHC(mod2007_mal3,type="HC0"))
mod2007_mal4 <- coeftest(mod2007_mal4, vcov=vcovHC(mod2007_mal4,type="HC0"))
mod2007_mal5 <- coeftest(mod2007_mal5, vcov=vcovHC(mod2007_mal5,type="HC0"))
mod2007_mal7 <- coeftest(mod2007_mal7, vcov=vcovHC(mod2007_mal7,type="HC0"))


table3a <- list(mod2007_fem1, mod2007_mal1, mod2007_fem2, mod2007_mal2, mod2007_fem3, mod2007_mal3, 
              mod2007_fem4, mod2007_mal4, mod2007_fem5, mod2007_mal5)

note_text <- paste(" Beta coefficients from OLS regression. Decimals rounded to two digits to maintain alignment. Standard errors were calculated using the huber-white (HC0) correction. The outcomes are drawn from a battery of questions that asked respondents if it was acceptable to beat one's wife if she: (1) goes out without telling her husband; (2) neglects her children; (3) argues with her husband; (4) refuses sex; (5) burns the food. The index is an additive measure.")

# I named this next table 3a1 because it seemts like its using the moedels from table 3a

table3a = stargazer(table3a,
                  title = "Effect of Female Incumbency on Pre-treatment Attitudes Towards IPV (Placebo Test)",
                  label = 'tab:placebo',
                  model.names = F,
                  model.numbers = T,
                  #column.separate = c(6),
                  column.separate = c(2,2,2,2,2,2),
                  header=FALSE,
                  column.labels = c("Goes out", "Neglects children", "Argues", "Refuses sex", "Burns food", "Index"),
                  
                  multicolumn = T,
                  dep.var.labels = c("Is it okay to beat one's wife if she:"), 
                  add.lines = list(c("Observations", rep(observations, 2)),
                                   c('Bandwidth', rep(c('1\\%'), 12)),
                                   c("Gender", rep(c("F", "M"), 6))),
                  covariate.labels = c("Female"),
                  star.cutoffs = c(0.05, 0.01),
                  digits = 3,
                  #float.env = 'sidewaystable',
                  keep.stat = c("n"),
                  notes = NULL,
                  notes.align = 'l') 

# Reading in Figure B.1
# Share of Seats Won by Women in Treatment and Control Constituencies

# Comment from the actual Paper( "make the first stage graph")
# Mutating the variables from the gender dataset
# Using the data set name gender_estimation_data instead of estimatuon_data (which is what the author originally had) because that is how it's named in my library 

gender_estimation_data$gender <- as.numeric(as.character(gender_estimation_data $gender))
gender_estimation_data$woman_win <- as.numeric(as.character(gender_estimation_data $woman_win))

# Grouping by the dapil code
# Calculating the mean of the percentages of woman winning by dapil code
# I'm assuming that by making gender=0, we are nly accounting for females that are denoted by the binary variable 0

tdat <- gender_estimation_data %>% 
  group_by(dapil_code) %>% 
  summarise(mean(woman_win, na.rm=T),
                           mean(gender == 0, na.rm=T))

# Plotting the data for both the control, pre election of a female legislator, and the treatment, election of a female legislator 

plot_dat <- tdat %>% filter (`mean(woman_win, na.rm = T)` == 1 | `mean(woman_win, na.rm = T)` == 0) %>% 
  group_by(`mean(woman_win, na.rm = T)`) %>% summarise(mean(`mean(gender == 0, na.rm = T)`))

# Naming the plot

names(plot_dat) <- c("woman_win", "prop")

#plot_dat$woman_win <- mutate(plot_dat$woman_win == as.character(plot_dat$woman_win))

# Naming the x axis 

plot_dat <- plot_dat %>% mutate(woman_win =ifelse(woman_win == 1, "Treatment", "Control"))
  

#plot_dat <- mutate(plot_dat$woman_win ==ifelse(plot_dat$woman_win = "1", "Treatment", "Control"))
  
  
plot_dat[plot_dat$woman_win == 1,]$woman_win <- "Treatment"
plot_dat[plot_dat$woman_win == 0,]$woman_win <- "Control"

plot_dat[plot_dat$woman_win == 1,]$woman_win <- "Treatment"
plot_dat[plot_dat$woman_win == 0,]$woman_win <- "Control"

# Creating the graphic and looking at the porportions of seats held by women before and after 2009

p10 <- ggplot(plot_dat, aes(x=as.factor(woman_win), y = prop)) + geom_bar(stat = "identity", fill = "orchid2", color = "black") + theme_minimal() + ylab("Share of Seats Held by Women") +
  xlab("") + theme(text=element_text(size=10, family="Times")) + labs(title= " Share of Seats Won by Women in Treatment and Control Constituencies") +
  theme(plot.title = element_text(face = "bold"))


# Printing the table

p10
 

```

# Appendix:

```{r, appendix, results="asis",include=FALSE}

# Replication code for table 1

# These fitted lines model the relationship between female incumbency and public opinions on 5 questions. These five questions incude 1)Is it okay to beat one's wife if she goes out?  2)Is it okay to beat one's wife if she neglects the kids?  3)Is it okay to beat one's wife if she argues? 4)Is it okay to beat one's wife if she refuses food ? 5) Is it okay to beat one's wife if she burns food?

# Running a standard linear regression

mod_fem1 <- lm(v744a_f2012 ~ woman_win, data = constituency_data)
mod_fem2 <- lm(v744b_f2012 ~ woman_win, data = constituency_data)
mod_fem3 <- lm(v744c_f2012 ~ woman_win, data = constituency_data)
mod_fem4 <- lm(v744d_f2012 ~ woman_win, data = constituency_data)
mod_fem5 <- lm(v744e_f2012 ~ woman_win, data = constituency_data)

# This added an index of the prior information onto the table

mod_fem7 <- lm(add_index_f2012 ~ woman_win, data = constituency_data)

# Nobs computes the number of non-missing observations

observations <- c(nobs(mod_fem1),nobs(mod_fem2),nobs(mod_fem3),nobs(mod_fem4),nobs(mod_fem5),nobs(mod_fem7))

# Coefests is an inference for estimated coefficents on the models

mod_fem1 <- coeftest(mod_fem1, vcov=vcovHC(mod_fem1,type="HC0"))
mod_fem2 <- coeftest(mod_fem2, vcov=vcovHC(mod_fem2,type="HC0"))
mod_fem3 <- coeftest(mod_fem3, vcov=vcovHC(mod_fem3,type="HC0"))
mod_fem4 <- coeftest(mod_fem4, vcov=vcovHC(mod_fem4,type="HC0"))
mod_fem5 <- coeftest(mod_fem5, vcov=vcovHC(mod_fem5,type="HC0"))
mod_fem7 <- coeftest(mod_fem7, vcov=vcovHC(mod_fem7,type="HC0"))

# Made the models with their respective coefficents into a table 
# Table is made up of the models and their respective coeftests

table <- list(mod_fem1, mod_fem2, mod_fem3, mod_fem4, mod_fem5, mod_fem7)

note_text <- paste("Beta coefficients from OLS regression. Standard errors were calculated using the huber-white (HC0) correction. The outcomes are drawn from a battery of questions that asked respondents if it was acceptable to beat one's wife if she: (1) goes out without telling her husband; (2) neglects her children; (3) argues with her husband; (4) refuses sex; (5) burns the food. The index is an additive measure.")

# Used stargazer to make the table

table = stargazer(table,
                  title = "Effect of Female Incumbency on Female Attitudes Towards IPV", header=FALSE,
                  label = 'tab:table_female',
                  model.names = F,
                  model.numbers = T,
                  #column.separate = c(6),
                  column.labels = c("Goes out", "Neglects children", "Argues", "Refuses sex", "Burns food", "Index"),
                  
                  multicolumn = T,
                  dep.var.labels = c("Is it okay to beat one's wife if she:"), 
                  add.lines = list(c("Observations", observations),
                                   c('Bandwidth', rep(c('1\\%'), 6))),
                  covariate.labels = c("Female Incumbency"),
                  star.cutoffs = c(0.05, 0.01),
                  #float.env = 'sidewaystable',
                  keep.stat = c("n"),
                  notes = NULL,
                  notes.align = 'l')


# Reading in table 2 

# These lines of code do the same thing that the previous table did, however, rather than predicting female respondent results, it predicts male respondent results. 

mod_mal1 <- lm(v744a_m2012 ~ woman_win, data = constituency_data)
mod_mal2 <- lm(v744b_m2012 ~ woman_win, data = constituency_data)
mod_mal3 <- lm(v744c_m2012 ~ woman_win, data = constituency_data)
mod_mal4 <- lm(v744d_m2012 ~ woman_win, data = constituency_data)
mod_mal5 <- lm(v744e_m2012 ~ woman_win, data = constituency_data)
mod_mal7 <- lm(add_index_m2012 ~ woman_win, data = constituency_data)

observations2 <- c(nobs(mod_mal1),nobs(mod_mal2),nobs(mod_mal3),nobs(mod_mal4),nobs(mod_mal5),nobs(mod_mal7))

# vcov returns a variance covariance matrix for the coefficents in the model
# the type argument indicates 


mod_mal1 <- coeftest(mod_mal1, vcov=vcovHC(mod_mal1,type="HC0"))
mod_mal2 <- coeftest(mod_mal2, vcov=vcovHC(mod_mal2,type="HC0"))
mod_mal3 <- coeftest(mod_mal3, vcov=vcovHC(mod_mal3,type="HC0"))
mod_mal4 <- coeftest(mod_mal4, vcov=vcovHC(mod_mal4,type="HC0"))
mod_mal5 <- coeftest(mod_mal5, vcov=vcovHC(mod_mal5,type="HC0"))
mod_mal7 <- coeftest(mod_mal7, vcov=vcovHC(mod_mal7,type="HC0"))

table2 <- list(mod_mal1, mod_mal2, mod_mal3, mod_mal4, mod_mal5, mod_mal7)

note_text <- paste("Beta coefficients from OLS regression. Standard errors were calculated using the huber-white (HC0) correction. The outcomes are drawn from a battery of questions that asked respondents if it was acceptable to beat one’s wife if she: (1) goes out without telling her husband; (2) neglects her children; (3) argues with her husband; (4) refuses sex; (5) burns the food. The index is an additive measure.")

table2 = stargazer(table2,
                  title = "Effect of Female Incumbency on Male Attitudes Towards IPV",
                  label = 'tab:table_male',
                  model.names = F,
                  model.numbers = T,
                  #column.separate = c(6),
                  column.labels = c("Goes out", "Neglects children", "Argues", "Refuses sex", "Burns food", "Index"),
                  
                  multicolumn = T,
                  dep.var.labels = c("Is it okay to beat one's wife if she:"), 
                  add.lines = list(c("Observations", observations2),
                                   c('Bandwidth', rep(c('1\\%'), 6))),
                  covariate.labels = c("Female Incumbency"),
                  star.cutoffs = c(0.05, 0.01),
                  #float.env = 'sidewaystable',
                  keep.stat = c("n"),
                  notes = NULL,
                  notes.align = 'l')

# Reading in table 3

# Another table showing respondent results 
# This table runs the hypothetical placebo effect for both males and females of the models prior

# These models are specific to females

mod2007_fem1 <- lm(v744a_f2007 ~ woman_win, data = constituency_data)
mod2007_fem2 <- lm(v744b_f2007 ~ woman_win, data = constituency_data)
mod2007_fem3 <- lm(v744c_f2007 ~ woman_win, data = constituency_data)
mod2007_fem4 <- lm(v744d_f2007 ~ woman_win, data = constituency_data)
mod2007_fem5 <- lm(v744e_f2007 ~ woman_win, data = constituency_data)
mod2007_fem7 <- lm(add_index_f2007 ~ woman_win, data = constituency_data)

observations3 <- c(nobs(mod2007_fem1),nobs(mod2007_fem2),nobs(mod2007_fem3),
                  nobs(mod2007_fem4),nobs(mod2007_fem5),nobs(mod2007_fem7))


mod2007_fem1 <- coeftest(mod2007_fem1, vcov=vcovHC(mod2007_fem1,type="HC0"))
mod2007_fem2 <- coeftest(mod2007_fem2, vcov=vcovHC(mod2007_fem2,type="HC0"))
mod2007_fem3 <- coeftest(mod2007_fem3, vcov=vcovHC(mod2007_fem3,type="HC0"))
mod2007_fem4 <- coeftest(mod2007_fem4, vcov=vcovHC(mod2007_fem4,type="HC0"))
mod2007_fem5 <- coeftest(mod2007_fem5, vcov=vcovHC(mod2007_fem5,type="HC0"))
mod2007_fem7 <- coeftest(mod2007_fem7, vcov=vcovHC(mod2007_fem7,type="HC0"))


# These models are specific to males

mod2007_mal1 <- lm(v744a_m2007 ~ woman_win, data = constituency_data)
mod2007_mal2 <- lm(v744b_m2007 ~ woman_win, data = constituency_data)
mod2007_mal3 <- lm(v744c_m2007 ~ woman_win, data = constituency_data)
mod2007_mal4 <- lm(v744d_m2007 ~ woman_win, data = constituency_data)
mod2007_mal5 <- lm(v744e_m2007 ~ woman_win, data = constituency_data)
mod2007_mal7 <- lm(add_index_m2007 ~ woman_win, data = constituency_data)

observations_male <- c(nobs(mod2007_mal1),nobs(mod2007_mal2),nobs(mod2007_mal3),
                       nobs(mod2007_mal4),nobs(mod2007_mal5),nobs(mod2007_mal7))


mod2007_mal1 <- coeftest(mod2007_mal1, vcov=vcovHC(mod2007_mal1,type="HC0"))
mod2007_mal2 <- coeftest(mod2007_mal2, vcov=vcovHC(mod2007_mal2,type="HC0"))
mod2007_mal3 <- coeftest(mod2007_mal3, vcov=vcovHC(mod2007_mal3,type="HC0"))
mod2007_mal4 <- coeftest(mod2007_mal4, vcov=vcovHC(mod2007_mal4,type="HC0"))
mod2007_mal5 <- coeftest(mod2007_mal5, vcov=vcovHC(mod2007_mal5,type="HC0"))
mod2007_mal7 <- coeftest(mod2007_mal7, vcov=vcovHC(mod2007_mal7,type="HC0"))


table3a <- list(mod2007_fem1, mod2007_mal1, mod2007_fem2, mod2007_mal2, mod2007_fem3, mod2007_mal3, 
              mod2007_fem4, mod2007_mal4, mod2007_fem5, mod2007_mal5)

note_text <- paste(" Beta coefficients from OLS regression. Decimals rounded to two digits to maintain alignment. Standard errors were calculated using the huber-white (HC0) correction. The outcomes are drawn from a battery of questions that asked respondents if it was acceptable to beat one's wife if she: (1) goes out without telling her husband; (2) neglects her children; (3) argues with her husband; (4) refuses sex; (5) burns the food. The index is an additive measure.")

# I named this next table 3a1 because it seemts like its using the moedels from table 3a

table3a = stargazer(table3a,
                  title = "Effect of Female Incumbency on Pre-treatment Attitudes Towards IPV (Placebo Test)",
                  label = 'tab:placebo',
                  header=FALSE,
                  model.names = F,
                  model.numbers = T,
                  #column.separate = c(6),
                  column.separate = c(2,2,2,2,2,2),
                  column.labels = c("Goes out", "Neglects children", "Argues", "Refuses sex", "Burns food", "Index"),
                  
                  multicolumn = T,
                  dep.var.labels = c("Is it okay to beat one's wife if she:"), 
                  add.lines = list(c("Observations", rep(observations, 2)),
                                   c('Bandwidth', rep(c('1\\%'), 12)),
                                   c("Gender", rep(c("F", "M"), 6))),
                  covariate.labels = c("Female"),
                  star.cutoffs = c(0.05, 0.01),
                  digits = 3,
                  #float.env = 'sidewaystable',
                  keep.stat = c("n"),
                  notes = NULL,
                  notes.align = 'l')


table3b <- list(mod2007_fem1, mod2007_mal1, mod2007_fem2, mod2007_mal2, mod2007_fem3, mod2007_mal3, 
              mod2007_fem4, mod2007_mal4, mod2007_fem5, mod2007_mal5, mod2007_fem7, mod2007_mal7)

note_text <- paste(" Beta coefficients from OLS regression. Decimals rounded to two digits to maintain alignment. Heteroskedastic consistent standard errors were calculated using the huber-white (HC0) correction. The outcomes are drawn from a battery of questions that asked respondents if it was acceptable to beat one's wife if she: (1) goes out without telling her husband; (2) neglects her children; (3) argues with her husband; (4) refuses sex; (5) burns the food. The index is an additive measure.")

# This next table is using information from the table above

table3b = stargazer(table3b,
                  title = "Effect of Female Incumbency on Pre-treatment Female Support for IPV (Placebo Test)",
                  label = 'tab:placebo_full',
                  model.names = F,
                  model.numbers = T,
                  #column.separate = c(6),
                  column.separate = c(2,2,2,2,2,2),
                  column.labels = c("Goes out", "Neglects children", "Argues", "Refuses sex", "Burns food", "Index"),
                  
                  multicolumn = T,
                  dep.var.labels = c("Is it okay to beat one's wife if she:"), 
                  add.lines = list(c("Observations", rep(observations, 2)),
                                   c('Bandwidth', rep(c('1\\%'), 12)),
                                   c("Gender", rep(c("F", "M"), 6))),
                  covariate.labels = c("Female"),
                  star.cutoffs = c(0.05, 0.01),
                  digits = 3,
                  #float.env = 'sidewaystable',
                  keep.stat = c("n"),
                  notes = NULL,
                  notes.align = 'l')

# Table_a3
# Looks at dependent variables for both males and females 

#note_text <- paste("")



table_a3 = stargazer(constituency_data, 
                  title = "Descriptive Statistics (Female Respondent Outcomes)",
                  header=FALSE,
                  label = 'tab:dso',
                  summary = T,
                  keep = c(7, 8, 9, 10, 11, 12),
                  covariate.labels = c("Goes out", "Neglects children", "Argues", "Refuses sex", "Burns food", "Additive index")
                  )

#I took out this write latex part bc my latex doesn't work
#write_latex_plain(table, note_text, './outputs/tables/descriptives_outcomes.tex')

#note_text <- paste("")


table_a3_2 = stargazer(constituency_data,
                  title = "Descriptive Statistics (Male Respondent Outcomes)",
                  label = 'tab:dso_male',
                  header=FALSE,
                  summary = T,
                  keep = c(25, 26, 27, 28, 29, 30),
                  covariate.labels = c("Goes out", "Neglects children", "Argues", "Refuses sex", "Burns food", "Additive index")
)


# write_latex_plain(table, note_text, './outputs/tables/descriptives_outcomes_male.tex')



# stargazer(constituency_data, keep = 13)

# names(constituency_data)


```


# Conclusion:

  Kuiper's "The Effect of Electing Female Candidates on Attitudes Towards Intimate Partner Violence" examines the impact that female legislatures can have on attitudes of intimate partner violence (IPV) in Indonesia. To measure this change in attitude, Kuipers uses survey data that gathers IPV opinions from 2009 and 2012, three after the introduction of female legislators. He models the effect of female legislators with two regressions that show the change in attitude to a series of IPV questions for female and male constituents, respectively. Overall, he finds that the addition of a female legislator seems to affect the changing attitudes towards IPV, particularly for female constituents. He explores the reason behind this change in attitude and attributes the change to increased funding for IPV related legislations as well as the increase in importance that IPV seems to have for female legislators in comparison to male legislators. 
  I replicated the paper in R programming, and I was able to derive similar values for my regressions, which also showed significant values especially for dependent variables in the regression specific to female constituents. Thus, my replicated models showed that the addition of female legislators seems to affect decreasing sentiments that tolerate IPV, leading to opinions that increasingly condemn IPV. 
  I further investigated these results through an extension that conducted these same models through a Bayesian framework rather than a standard linear model. When conducting my Bayesian regressions on the two main models, I generally found the results to be consistent with the original results found in the paper. When comparing the indexes of the model that predicted change in IPV attitudes for both male and female constituents, I found the estimates for the Female Incumbency coefficient and intercepts to be fairly similar. Thus, I found little discrepancies between the Bayesian regressions and standard linear regressions. In addition to comparing the estimates, I also ran a posterior predictive check with the Bayesian regressions to examine how well both index models fit the data. The posterior predictive check highlighted how the model that predicted the change in IPV opinions for female constituents was a better fit than the model specific to male constituents. Thus, the results from the regression models predicting the change in IPV attitudes for males are not only insignificant but also invalid as well. However, we can conclude that the addition of a female legislator does affect female constituents. Thus, this leads me to ask what should be done to increase more condemnation of IPV for all constituents? 
  While the answer to this question is beyond the scope of this paper, it is something interesting to consider. The results of the paper show that in large, female legislators do affect community-wide IPV opinions. They on average seem to put women's issues at the forefront of their politics, thus leading to more enaction of legislation that condemns IPV and helps victims of IPV. This acknowledgment is quite important as it highlights the tangible impact that female legislators have in changing IPV attitudes for the better. While this is very important, it's also necessary to note that the IPV can not be solved by the election of female legislators alone. Even if female legislators do enact important laws that condemn IPV, there must be more political action that condemns IPV, for both male and female legislators alike. Thus, while the results of this paper highlight the benefits that female legislators have and the importance of IPV in one's community, it also highlights the need for more political action from all lawmakers. 
  
# Bibliography

In my paper, I make use of @Kuipers2019, @Beaman2017, @Chattopadhyay2007, @Cooper2020, @Vintila2017, and @Bhalotra et al.  Additionally, I also referred to @GaryKing for replication advice.


